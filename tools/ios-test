#!/bin/bash
#
# This script runs the iOS tests.

set -e
set -o pipefail

pushd swift

rm -f Podfile.lock
xcodegen && pod install
echo "Updated Podfile.lock:"
cat Podfile.lock
xcodebuild -workspace TrustWalletCore.xcworkspace \
	-scheme WalletCore \
	-sdk iphonesimulator \
	-destination "platform=iOS Simulator,name=iPhone 15,OS=18.5" \
	test | xcbeautify

popd
